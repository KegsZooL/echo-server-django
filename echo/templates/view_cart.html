{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <title>Корзина</title>
</head>

<body>

{% block content %}
    <h1>Ваша корзина</h1>
    
    {% if cart_items %}
        <table class="table_content">
            <tr>
                <th>Книга</th>
                <th>Автор</th>
                <th>Цена</th>
            </tr>
            {% for item in cart_items %}
            <tr>
                <td>{{ item.book.title }}</td>
                <td>{{ item.book.author }}</td>
                <td>{{ item.book.price }}</td>
                <td>
                    
                    <div class="item_counter">
                        <form action="{% url 'remove_from_cart' item.book.id %}" method="POST">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger btn-sm">-</button>
                        </form>
                        
                        {{ item.quantity }}

                        <form action="{% url 'add_to_cart' item.book.id %}" method="POST">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-success btn-sm">+</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </table>
        <h3>Общая стоимость: {{ total_price }} руб.</h3>
    {% else %}
        <p>Ваша корзина пуста.</p>
    {% endif %}
    <p><a href="../">Перейти к списку книг</a></p>
{% endblock %}

</body>
</html>
